<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
    <input id="submit" onclick="submit()" type="button" value="请求">
    <button onclick="download()">下载</button>
</body>
<script>
    $(function(){
        function getQueryString(param){
            var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if(r!=null){
                alert('你下载的文件不存在！');
            }
        }

        getQueryString("error");

    });
    function submit() {
        var url = "http://localhost:8080/task-deal/create";
        var params = {
            "userId":285,
            "companyId":124,
            "procDefId":"e7678805-c277-11ea-a04f-181deaf1ddd1",
            "formValues":"{\"project\":\"dddd\",\"date\":\"2020-07-08\"}",
            "invoices":[
                {
                    "invoiceId":129,
                    "expenseAmount":100.35,
                    "invoiceSource":0
                },
                {
                    "invoiceId":1632,
                    "expenseAmount":900.00,
                    "invoiceSource":1
                }
            ]
        };
        // $.post(url,params,function (data) {
        //     console.log(data);
        // },"json");
        $.ajax({
            type: "post",
            data: JSON.stringify(params),
            url: url,
            cache:false,
            contentType:"application/json"
            },
            function (data) {
            console.log(data);
        },"json")
    }
    function download() {
        window.location.href = "http://127.0.0.1:8080/fk/task-manage/export-pdf-have-done-tasks?userId=73&companyId=1&departmentId=5";
    }
</script>
</html>